<!doctype html><html lang="en"><head><meta charset="UTF-8"><title>Gaze Data Visualization</title><script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script><script src="https://d3js.org/d3.v6.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script><script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script><style>body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background-color:#f4f7fa;color:#333;margin:0;padding:20px}h1,h3{color:#2c3e50;text-align:center}h1{font-size:2.5em;margin-bottom:10px}h3{font-size:1.2em;font-weight:400;margin-bottom:30px}p{font-size:1em;line-height:1.6em;margin-bottom:20px;text-align:center}input[type=file]{display:block;margin:0 auto 20px auto;padding:10px;font-size:1em;cursor:pointer}.chart{display:block;margin:20px auto;background:#fff;border:1px solid #ccc;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,.1)}#heatmap,#scatterPlot{width:100%;height:500px}#threeDPlotContainer{display:flex;justify-content:center;align-items:center;margin-top:30px}#threeDPlot{width:800px;height:500px;background:#e1e8f0;border:1px solid #ccc;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,.1)}#legendContainer{display:flex;flex-direction:column;align-items:center;margin-left:20px}#legendContainer h4{margin:10px 0;font-size:1.2em;color:#333}#colorLegend{width:30px;height:200px;border:1px solid #ccc;border-radius:5px;margin-bottom:10px}#legendContainer p{margin:5px 0;font-size:1em;color:#333}@media (max-width:900px){#heatmap,#scatterPlot,#threeDPlot{width:100%;height:300px}h1{font-size:2em}h3{font-size:1em}input[type=file]{width:90%;margin-bottom:15px}}</style><script defer="defer" src="/gaze-visualisation/static/js/main.76befe22.js"></script><link href="/gaze-visualisation/static/css/main.fe576db8.css" rel="stylesheet"></head><body><h1>Gaze Data Visualization</h1><h3>Gaze data visualization involves the graphical representation of eye-tracking data to understand where, when, and how users look at different areas of a visual scene</h3><p>This tool allows you to visualize gaze data through both a 2D scatter plot, a 2D heatmap, and a 3D point cloud. Upload your CSV file, and the data will be rendered in these representations below.</p><input type="file" id="upload" accept=".csv"> <svg id="scatterPlot" class="chart">2D Representation - Scatter Plot</svg><p>The 2D scatter plot provides a flat representation of gaze data using X and Y coordinates. Each point on the graph represents a single data point, plotted according to its X and Y values.</p><svg id="heatmap" class="chart">2D Representation - Heatmap</svg><p>The 2D heatmap shows the density of gaze points, with warmer colors indicating areas with more concentrated gaze data.</p><div id="threeDPlotContainer"><div id="threeDPlot"></div><div id="legendContainer"><h4>Duration Legend</h4><canvas id="colorLegend"></canvas><p id="minDuration">Min: 0 ms</p><p id="maxDuration">Max: 0 ms</p></div></div><p>The 3D visualization color-codes each point based on the duration of gaze in milliseconds, with blue indicating shorter durations and red representing longer durations, allowing for quick insights into where users focused their attention the most. You can rotate, zoom, and pan around the 3D space to explore the spatial relationships between data points.</p><script>function render2DScatterPlot(e){var t=d3.select("#scatterPlot");t.selectAll("*").remove();var n="Centroid_X",r="Centroid_Y",a=20,o=30,i=40,d=40,l=800-d-o,c=500-a-i,u=d3.scaleLinear().domain(d3.extent(e,(function(e){return e[n]}))).nice().range([0,l]),s=d3.scaleLinear().domain(d3.extent(e,(function(e){return e[r]}))).nice().range([c,0]),f=t.attr("width",l+d+o).attr("height",c+a+i).append("g").attr("transform","translate("+d+","+a+")");f.append("g").attr("transform","translate(0,"+c+")").call(d3.axisBottom(u)),f.append("g").call(d3.axisLeft(s)),f.append("g").selectAll("dot").data(e).enter().append("circle").attr("cx",(function(e){return u(e[n])})).attr("cy",(function(e){return s(e[r])})).attr("r",3).style("fill","#69b3a2")}function renderHeatmap(e){var t=d3.select("#heatmap");t.selectAll("*").remove();var n="Centroid_X",r="Centroid_Y",a=20,o=30,i=40,d=40,l=800-d-o,c=500-a-i,u=d3.scaleLinear().domain(d3.extent(e,(function(e){return e[n]}))).nice().range([0,l]),s=d3.scaleLinear().domain(d3.extent(e,(function(e){return e[r]}))).nice().range([c,0]),f=t.attr("width",l+d+o).attr("height",c+a+i).append("g").attr("transform","translate("+d+","+a+")"),m=20,p=Math.ceil(l/m),h=Math.ceil(c/m),E=new Array(p*h).fill(0);e.forEach((function(e){var t=Math.floor(u(e[n])/m),a=Math.floor(s(e[r])/m);E[a*p+t]++}));var g=d3.scaleSequential(d3.interpolateWarm).domain([0,d3.max(E)]);f.selectAll("rect").data(E).enter().append("rect").attr("x",(function(e,t){return t%p*m})).attr("y",(function(e,t){return Math.floor(t/p)*m})).attr("width",m).attr("height",m).style("fill",(function(e){return g(e)}))}function render3DScatterPlot(e){var t=document.getElementById("threeDPlot");t.innerHTML="";var n=new THREE.Scene,r=new THREE.PerspectiveCamera(75,t.clientWidth/t.clientHeight,.1,1e3),a=new THREE.WebGLRenderer;a.setSize(t.clientWidth,t.clientHeight),t.appendChild(a.domElement);var o=new THREE.OrbitControls(r,a.domElement),i=new THREE.BufferGeometry,d=[],l=[],c=d3.extent(e,(function(e){return e.duration_ms}));document.getElementById("minDuration").textContent="Min: "+c[0]+" ms",document.getElementById("maxDuration").textContent="Max: "+c[1]+" ms",e.forEach((function(e){if(void 0!==e.Centroid_X&&void 0!==e.Centroid_Y&&void 0!==e.Centroid_Z){d.push(e.Centroid_X,e.Centroid_Y,e.Centroid_Z);var t=(e.duration_ms-c[0])/(c[1]-c[0]),n=new THREE.Color;n.setHSL(.7-.7*t,1,.5),l.push(n.r,n.g,n.b)}})),i.setAttribute("position",new THREE.Float32BufferAttribute(d,3)),i.setAttribute("color",new THREE.Float32BufferAttribute(l,3));var u=new THREE.PointsMaterial({size:5,vertexColors:!0}),s=new THREE.Points(i,u);n.add(s),r.position.z=100,o.update(),function e(){requestAnimationFrame(e),o.update(),a.render(n,r)}(),drawColorLegend(c[0],c[1])}function drawColorLegend(e,t){var n=document.getElementById("colorLegend"),r=n.getContext("2d"),a=r.createLinearGradient(0,0,0,n.height);a.addColorStop(0,"blue"),a.addColorStop(.5,"green"),a.addColorStop(1,"red"),r.fillStyle=a,r.fillRect(0,0,n.width,n.height)}document.getElementById("upload").addEventListener("change",(function(e){var t=e.target.files[0];t&&Papa.parse(t,{header:!0,dynamicTyping:!0,complete:function(e){var t=e.data;render2DScatterPlot(t),renderHeatmap(t),render3DScatterPlot(t)},error:function(e){console.error("Error:",e)}})}))</script></body></html>